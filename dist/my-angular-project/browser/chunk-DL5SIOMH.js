import{Aa as F,Ab as H,Da as _,K as w,Ka as a,L as M,Ma as o,N as k,Na as s,Oa as m,P as T,Pa as S,Qa as h,Ra as d,Sa as R,Ta as u,Ua as y,Va as C,Wa as B,Xa as I,Y as f,Z as p,a as N,b as P,oa as A,ob as V,pb as G,qb as D,ra as r,sa as E,vb as W,wb as j,yb as U,za as v}from"./chunk-CDNUTU3G.js";var g=class i{constructor(n){this.httpClient=n}apiWeatherUrl="https://api.openweathermap.org/data/2.5/weather";apiforecastUrl="https://api.openweathermap.org/data/2.5/forecast";apiKey="d4594364698122bfd1c4b3eb5f2ff19f";getWeatherByCity(n){let t={q:n,appid:this.apiKey};return this.httpClient.get(this.apiWeatherUrl,{params:t})}getWeatherReportForcast(n){let t={lat:n.coord.lat,lon:n.coord.lon,appid:this.apiKey};return this.httpClient.get(this.apiforecastUrl,{params:t})}static \u0275fac=function(t){return new(t||i)(T(W))};static \u0275prov=w({token:i,factory:i.\u0275fac,providedIn:"root"})};function X(i,n){if(i&1&&(o(0,"div",7)(1,"p"),u(2),s(),m(3,"img",3),o(4,"p"),u(5),s()()),i&2){let t=n.$implicit,e=d();r(2),y((t==null?null:t.date)||"No date available"),r(),a("src",e.getWeatherIconUrl(t.icon?t.icon:"default-icon.png"),A),r(2),C("",e.convertToCelsius((t==null?null:t.temp)||0),"\xB0C")}}var b=class i{weatherData;ngOnInit(){}getWeatherIconUrl(n){return n?`https://openweathermap.org/img/wn/${n}.png`:""}getDailyForecast(){return this.weatherData?.list?this.weatherData.list.filter((t,e)=>e%8===0).map(t=>({date:new Date(t.dt*1e3).toLocaleDateString("en-US",{weekday:"short"}),temp:t.main.temp,icon:t.weather[0].icon})):[]}convertToCelsius(n){return(n-273.15).toFixed(2)}static \u0275fac=function(t){return new(t||i)};static \u0275cmp=v({type:i,selectors:[["app-weather-forcast"]],inputs:{weatherData:"weatherData"},decls:17,vars:8,consts:[[1,"weather-forecast"],[1,"current-weather"],[1,"icon"],["alt","Weather Icon",3,"src"],[1,"details"],[1,"forecast"],["class","day",4,"ngFor","ngForOf"],[1,"day"]],template:function(t,e){t&1&&(o(0,"div",0)(1,"h1"),u(2),s(),o(3,"div",1)(4,"div",2),m(5,"img",3),s(),o(6,"div",4)(7,"p"),u(8),s(),o(9,"p"),u(10),s(),o(11,"p"),u(12),s(),o(13,"p"),u(14),s()()(),o(15,"div",5),_(16,X,6,3,"div",6),s()()),t&2&&(r(2),y(e.weatherData?e.weatherData.city.name:"Unknown City"),r(3),a("src",e.getWeatherIconUrl(e.weatherData?e.weatherData.list[0].weather[0].icon:"default-icon.png"),A),r(3),C("",e.weatherData?e.weatherData.list[0].main.temp:0,"\xB0C"),r(2),y(e.weatherData?e.weatherData.list[0].weather[0].description:"No description available"),r(2),B("Wind: ",e.weatherData?e.weatherData.list[0].wind.speed:0," m/s, ",e.weatherData?e.weatherData.list[0].wind.deg:0,"\xB0"),r(2),C("Pressure: ",e.weatherData?e.weatherData.list[0].main.pressure:0," hPa"),r(2),a("ngForOf",e.getDailyForecast()))},dependencies:[D,V],styles:[".weather-forecast[_ngcontent-%COMP%]{font-family:Arial,sans-serif;color:#333;max-width:600px;margin:0 auto;padding:20px;border:1px solid #ddd;border-radius:10px;box-shadow:0 4px 8px #0000001a;flex-grow:1}.weather-forecast[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:24px;text-align:center;margin-bottom:20px}.current-weather[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:20px}.current-weather[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:250px;height:250px}.current-weather[_ngcontent-%COMP%]   .details[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:5px 0}.forecast[_ngcontent-%COMP%]{display:flex;justify-content:space-around;margin-top:20px}.forecast[_ngcontent-%COMP%]   .day[_ngcontent-%COMP%]{text-align:center}.forecast[_ngcontent-%COMP%]   .day[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:5px 0}"]})};var Y={"[class.ng-untouched]":"isUntouched","[class.ng-touched]":"isTouched","[class.ng-pristine]":"isPristine","[class.ng-dirty]":"isDirty","[class.ng-valid]":"isValid","[class.ng-invalid]":"isInvalid","[class.ng-pending]":"isPending"},Be=P(N({},Y),{"[class.ng-submitted]":"isSubmitted"});var J=new k("CallSetDisabledState",{providedIn:"root",factory:()=>$}),$="always";var Q=(()=>{class i{static \u0275fac=function(e){return new(e||i)};static \u0275mod=F({type:i});static \u0275inj=M({})}return i})();var L=(()=>{class i{static withConfig(t){return{ngModule:i,providers:[{provide:J,useValue:t.callSetDisabledState??$}]}}static \u0275fac=function(e){return new(e||i)};static \u0275mod=F({type:i});static \u0275inj=M({imports:[Q]})}return i})();function ee(i,n){if(i&1){let t=S();o(0,"div",10)(1,"app-button",11),h("emitButtonClickEvent",function(){let l=f(t).$implicit,c=d();return p(c.getWeatherForcast(l))}),s(),o(2,"app-button",11),h("emitButtonClickEvent",function(){let l=f(t).$implicit,c=d();return p(c.getWeatherReport(l.name,!0))}),s(),o(3,"app-button",11),h("emitButtonClickEvent",function(){let l=f(t).$implicit,c=d();return p(c.removeWeatherReport(l.name))}),s()()}if(i&2){let t=n.$implicit,e=d();r(),a("buttonName",e.formatWeatherString(t))("buttonType",e.ButtonTypeEnum.Light)("buttonSize","sm"),r(),a("buttonName","\u27F3")("buttonType",e.ButtonTypeEnum.OutlineSecondary)("buttonSize","sm"),r(),a("buttonName","x")("buttonType",e.ButtonTypeEnum.OutlineDanger)("buttonSize","sm")}}function te(i,n){if(i&1&&(o(0,"div"),m(1,"app-weather-forcast",12),s()),i&2){let t=d();r(),a("weatherData",t.weatherData)}}function ne(i,n){i&1&&(o(0,"div",13)(1,"H1"),u(2," Add City's / Countries and Select it "),s(),o(3,"h4"),u(4,"London, Vijayawada, Tirupati, Hyderabad"),s()())}var q=class i{constructor(n){this.weatherUpdateService=n}ButtonTypeEnum=H;citysWeatherReport=[];weatherData;getWeatherReport(n,t=!1){this.citysWeatherReport.findIndex(e=>e.name===n)>-1&&(t=!0),this.weatherUpdateService.getWeatherByCity(n).subscribe(e=>{if(t){let l=this.citysWeatherReport.findIndex(c=>c.name===n);l>-1&&(this.citysWeatherReport[l]=e)}else this.citysWeatherReport.unshift(e),this.citysWeatherReport.length>8&&this.citysWeatherReport.pop()},e=>{console.error("Error fetching weather:",e)})}getWeatherForcast(n){this.weatherUpdateService.getWeatherReportForcast(n).subscribe(t=>{this.weatherData=t},t=>{console.error("Error fetching weather:",t)})}convertToCelsius(n){return(n-273.15).toFixed(2)}formatWeatherString(n){let t=n.name,e=this.convertToCelsius(n.main.temp),l=n.weather[0].main;return`${t} - ${e}\xB0C ${l}`}removeWeatherReport(n){let t=this.citysWeatherReport.findIndex(e=>e.name===n);t>-1?(this.weatherData=null,this.citysWeatherReport.splice(t,1),console.log(`${n} weather report removed successfully.`)):console.warn(`${n} weather report not found.`)}removeCityReports(){this.citysWeatherReport=[]}static \u0275fac=function(t){return new(t||i)(E(g))};static \u0275cmp=v({type:i,selectors:[["app-weather"]],features:[I([g])],decls:11,vars:7,consts:[["input",""],[1,"container","m-2"],[1,"recent-locations"],[1,"input-group","mb-3"],["type","text","placeholder","Type city name","aria-label","City name","aria-describedby","button-addon2",1,"form-control"],["id","button-addon2",3,"emitButtonClickEvent","buttonName","buttonType"],["class","location-item",4,"ngFor","ngForOf"],[3,"emitButtonClickEvent","buttonName","buttonType"],[4,"ngIf"],["class","w-100 h-100",4,"ngIf"],[1,"location-item"],[3,"emitButtonClickEvent","buttonName","buttonType","buttonSize"],[1,"w-100","h-100",3,"weatherData"],[1,"w-100","h-100"]],template:function(t,e){if(t&1){let l=S();o(0,"div",1)(1,"div",2)(2,"div",3),m(3,"input",4,0),o(5,"app-button",5),h("emitButtonClickEvent",function(){f(l);let O=R(4);return e.getWeatherReport(O.value),p(O.value="")}),s()(),o(6,"div"),_(7,ee,4,9,"div",6),s(),o(8,"app-button",7),h("emitButtonClickEvent",function(){return f(l),p(e.removeCityReports())}),s()(),_(9,te,2,1,"div",8)(10,ne,5,0,"div",9),s()}t&2&&(r(5),a("buttonName","+")("buttonType",e.ButtonTypeEnum.OutlineSecondary),r(2),a("ngForOf",e.citysWeatherReport),r(),a("buttonName","Clear All")("buttonType",e.ButtonTypeEnum.Danger),r(),a("ngIf",e.weatherData),r(),a("ngIf",!e.weatherData))},dependencies:[U,b,D,V,G,j,L],styles:[".container[_ngcontent-%COMP%]{display:flex;min-height:fit-content;max-height:100%}.recent-locations[_ngcontent-%COMP%]{border-right:1px solid #ccc;padding-right:20px;margin-right:20px;max-width:fit-content;min-width:fit-content}.location-item[_ngcontent-%COMP%]{display:flex;align-items:center;margin-bottom:10px}.location-item[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{margin-left:5px}.clear-button[_ngcontent-%COMP%]{margin-top:auto}@media (max-width: 768px){.container[_ngcontent-%COMP%]{flex-direction:column}.recent-locations[_ngcontent-%COMP%]{border-right:none;border-bottom:1px solid #ccc;padding-bottom:20px;margin-bottom:20px;padding-right:0;margin-right:0;max-width:fit-content}}"]})};export{q as WeatherComponent};
